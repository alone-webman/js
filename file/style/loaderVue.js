!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).loaderVue=t()}(this,function(){"use strict";const e={app(e,t){let o=document.getElementById(e);return o||(o=document.createElement("div"),o.setAttribute("id",e),document.body.appendChild(o)),t&&(o.innerHTML=t),o},setTitle(e){if(e){let t=document.getElementsByTagName("title")[0];t||(t=document.createElement("title"),document.getElementsByTagName("head")[0].appendChild(t)),document.title=e}},setMetaTag(e,t){if(t){let o=document.querySelector(`meta[name="${e}"]`);o||(o=document.createElement("meta"),o.name=e,document.head.appendChild(o)),o.content=t}},setFavicon(e,t={}){let o=document.querySelector('link[icon="favicon"]');return o||(o=document.createElement("link"),document.getElementsByTagName("head")[0].appendChild(o)),function(e,o){return e.href=o,e.rel="icon",e.setAttribute("icon","favicon"),Object.keys(t).forEach(o=>e.setAttribute(o,t[o])),e}(o,e)},setLink(e,t=!1){const o=e.split("?")[0],s=document.querySelectorAll("link");for(let e=0;e<s.length;e++)if(s[e].getAttribute("href").split("?")[0]==o)return s[e];const r=document.createElement("link");return r.setAttribute("href",e),r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),document.getElementsByTagName("head")[0].appendChild(r),!1===t?r:new Promise((e,t)=>(r.onload=e,r.onerror=t,r))},loadHtml:()=>'<div id="app"><style>body{margin:0}.sk-flow{width:50px;height:50px;display:flex;justify-content:space-between}.sk-flow-dot{width:25%;height:25%;background-color:#79bbff;border-radius:50%;animation:sk-flow 1.4s cubic-bezier(.455,.03,.515,.955)0s infinite both}.sk-flow-dot:first-child{animation-delay:-.3s}.sk-flow-dot:nth-child(2){animation-delay:-.15s}@keyframes sk-flow{0%,100%,80%{transform:scale(.3)}40%{transform:scale(1)}}</style><div style="width:100vw;height:100vh;display:flex;align-items:center;justify-content:center"><div class="sk-flow"><div class="sk-flow-dot"></div><div class="sk-flow-dot"></div><div class="sk-flow-dot"></div></div></div></div>',setScript(e,t){const o=e.split("?")[0],s=document.querySelectorAll("script[load]");for(let e=0;e<s.length;e++)if(s[e].getAttribute("src").split("?")[0]==o)return t&&t(s[e]),s[e];const r=document.createElement("script");return r.setAttribute("type","text/javascript"),r.setAttribute("async",""),r.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(r),"function"==typeof t?(r.readyState?r.onreadystatechange=function(){"compvare"!=r.readyState&&"loaded"!=r.readyState||(r.onreadystatechange=null,t())}:r.onload=()=>t(),r):new Promise((e,t)=>(r.onload=e,r.onerror=t,r))},parseHTML(e,t="text/html",o=!0){if("undefined"!=typeof DOMParser&&!0===o)return(new DOMParser).parseFromString(e,t);const s=document.implementation.createHTMLDocument("");return s.documentElement.innerHTML=e,s},getPath(e,t=""){const o=this.trim(e),s=o.startsWith("http://")||o.startsWith("https://"),r=new URL(t,s?o:"https://r.c/"+o);return this.rtrim(s?r.href:r.pathname)},blob:(e,t="js")=>URL.createObjectURL(new Blob([e],{type:{js:"application/javascript",css:"text/css",html:"text/html"}[t]||t})),trim(e,t="/"){const o=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(`^${o}+|${o}+$`,"g");return e.replace(s,"")},rtrim(e,t="/"){const o=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(`${o}+$`,"g");return e.replace(s,"")},getPathFormat(e){const t=e.replace(/[?#].*$/,"").match(/\.([a-zA-Z0-9]+)$/);return t&&t[1]||""},uuid:()=>Date.now().toString(36)+Math.random().toString(36).substring(2),hash(e){let t=2166136261;for(let o=0;o<e.length;o++)t^=e.charCodeAt(o),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return(t>>>0).toString(16).padStart(8,"0")},xhr:async(e,t,o=!0,s=null)=>new Promise((r,n)=>{const a=new XMLHttpRequest;a.open("GET",e,!0),a.timeout=t;const i=e=>{!0===o?n(e):r({code:400,xhr:a,type:"error",data:e})};a.onload=()=>{a.status>=200&&a.status<300&&r({code:200,xhr:a,type:a.getResponseHeader("content-type"),data:a.responseText}),i(`HTTP Error: ${a.status}`)},a.ontimeout=()=>i("Request timeout"),a.onerror=()=>i("Network error"),(s&&"function"==typeof s&&s(a)||a).send()}),getParams(e="",t={}){const o=window.location.href,s=o.indexOf("?");if(-1!==s){const e={};o.substring(s).split("#")[0].slice(1).split("&").forEach(t=>{if(t){const[o,s]=t.split("=");e[o]=decodeURIComponent(s||"")}}),Object.assign(t,e)}if(e){if(!t||0===Object.keys(t).length)return e;const o=new URL(e,window.location.origin);return Object.keys(t).forEach(e=>{o.searchParams.append(e,t[e])}),o.toString()}return t}},t=function(e){const t=new WeakMap,o={id:Symbol(e)};!t.has(o)&&t.set(o,new Map);const s=t.get(o);return{set(e,t){return s.set(e,t),this},get:(e,t=void 0)=>s.has(e)?s.get(e):t}};var o={cache:t,vueCache:t("VueCache"),styleCache:t("StyleCache")};const s=function(t={}){const r=Object.assign({body:"",bodyType:"",fullPath:"",importType:[],cache:!0,compress:!0,isBlob:!1,timeout:5e3,req:e=>e,importName:"_import_",safe:window.aloneSafe||null,uuid:e.hash(t.fullPath||e.uuid())},t),n=(r.bodyType||"").split(",")[0].toLowerCase();if(r.bodyType){const e=r.safe;e&&(e?.mov&&"application/json"===n?r.body=e?.mov?.de(JSON.parse(r.body)):e?.url&&"text/plain"===n&&(r.body=e?.url?.de(r.body)))}const a=r.req;return a&&"function"==typeof a&&(r.body=a(r.body,r.fullPath,r.bodyType)||r.body),{parseDoc:null,templateElem:null,scriptElem:null,styleElem:null,scopedId:`data-v-${r.uuid}`,template:"",styleCode:"",scopedCode:"",async vueCode(){let t;if(r.bodyType&&r.importType&&r.importType.includes(n))t=await import(e.blob(r.body));else{this.parseDoc=e.parseHTML(r.body),this.templateElem=this.parseDoc.querySelectorAll("template");const o=this.templateElem.length>0?await this.processHtml():r.body;if(!o)return{template:this.template};{const e=this.delImportFrom(o),s=await this.getImportParam(o);t=await this.execCode(e,s)}}return t},async getImportParam(t){let n={};const a=this.getImportFrom(t);return Object.keys(a).length>0&&await Promise.all(Object.keys(a).map(async t=>{let i=(a[t]||{}).method;if(i&&Object.keys(i).length>0){let a,c=e.getPath(r.fullPath,t);const l=e.hash(c);let u=!1;if(r.cache){let e=o.vueCache.get(l);e&&(u=!0,a=e)}if(!u){const t=await e.xhr(c,r.timeout,!0),n={...r};a=await s(Object.assign({},{...n},{body:t.data,bodyType:t.type,fullPath:c})).vueCode(),r.cache&&o.vueCache.set(l,a)}Object.keys(i).forEach(e=>{let t=i[e];n[e]="*"===t?a:t!=e?a[t]:a[t]||a.default})}})),n},async execCode(t,o){t=this.template?this.addExportCode(t,`\ntemplate:\`${this.template}\`,\n`):t;let s=this.convertFunction(t,o,r.isBlob?"export default":"return");if(s=this.compress(s,"js"),r.isBlob){return(await import(e.blob(s))).default(o)}return new Function(s)()(o)},convertFunction(e,t={},o="return"){const s=r.importName;let n=this.convertCode(e,s);return`${o} function(_model_){\nlet ${s}=_model_||{};\n${Object.keys(t).map(e=>`let ${e} = ${s}.${e};`).join("\n")}\n${n}\nreturn ${s};\n}`},convertCode(e,t=""){const o=(t||r.importName).trim();let s=(e=e.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*?$|(?<!\\)(['"`]).*?\1|(\/\/.*)/gm,(e,t)=>t?e:"").replace(/^\s*[\r\n]/gm,"")).replace(/export\s+(?:(async)\s+)?(default|const|let|var|function|class)\s*(\w*)(?:\s*=\s*)?\s*(async\s+)?([^;{]*[;{])/g,(e,t,s,r,n,a)=>{switch(a=a.trim(),s){case"default":switch(r){case"class":return`${o}.default = class ${a}`;case"async":return`${o}.default = ${a.startsWith("class")?"":"async "}${a}`;case"function":return`${o}.default = function${a}`}return`${o}.default = ${a}`;case"const":case"let":case"var":if(!r)break;return a.includes("=>")||a.includes("function")?`${o}.${r} = ${t||n?"async ":""}${a}`:`${o}.${r} = ${a}`;case"function":return`${o}.${r} = ${t||n?"async ":""}function${a}`;case"class":return`${o}.${r} = class${a}`}return e});return s=s.replace("export default",`${o}.default =`),s=s.replace(new RegExp(`([^;\\s])(\\s*)(\\r?\\n\\s*${t}\\.default)`,"g"),"$1;$2$3"),s=s.endsWith(";")?s:s+";",s.trim()},async processHtml(){for(const e of this.templateElem)this.template+=e.innerHTML+"\n";this.templateElem.forEach(e=>e.parentNode.removeChild(e)),this.scriptElem=this.parseDoc.querySelectorAll("script");let e="";for(const t of this.scriptElem)e+=t.textContent+"\n";this.scriptElem.forEach(e=>e.parentNode.removeChild(e)),this.styleElem=this.parseDoc.querySelectorAll("style");for(const e of this.styleElem)e.hasAttribute("scoped")?this.scopedCode+=e.textContent+"\n":this.styleCode+=e.textContent+"\n";let t=!1;if(r.cache){let e=o.styleCache.get(r.uuid);e&&(t=!0,this.styleCode=e.styleCode,this.scopedCode=e.scopedCode)}return t||(this.styleCode=await this.handleStyle(this.styleCode,r.fullPath),this.styleCode=this.compress(this.styleCode,"css"),this.scopedCode=await this.handleStyle(this.scopedCode,r.fullPath),this.scopedCode=this.compress(this.scopedCode,"css"),r.cache&&o.styleCache.set(r.uuid,{styleCode:this.styleCode,scopedCode:this.scopedCode})),this.styleCode&&this.loadStyle(this.styleCode,"global"),this.scopedCode&&(this.scopedCode=this.addScopedIdToCss(this.scopedCode),this.loadStyle(this.scopedCode,"scoped"),this.addScopedIdToTemplate()),e},getImportFrom(t){const o={};return[...t.matchAll(/import\s+([\s\S]*?)\s+from\s+['"](.*?)['"]/g)].forEach(t=>{let s={};const r=e.trim(e.trim(t[2].trim(),"{"),"}"),n=e.trim(e.trim(t[1].trim(),"{"),"}").split(",").map(t=>e.trim(e.trim(t.trim(),"{"),"}")).filter(Boolean);n.forEach(e=>{if(e.includes(" as ")){const[t,o]=e.split(" as ").map(e=>e.trim());s[o]=t}else{const t=e.trim();s[t]=t}}),o[r]?(o[r].method=Object.assign(o[r].method,s),o[r].specifier.push(n)):o[r]={method:s,specifier:[n]}}),o},async handleStyle(t,s,n=null){if((n=n||this.getImportUrl(t)).length>0){const a=/@import\s*(url\()?\s*['"]([^'"]+)['"]\s*(\))?\s*([^;]*);/g;t=t.replace(a,""),await Promise.all(n.map(async n=>{const a=e.getPath(s,n?.path),i=e.hash(a);let c=!1;if(r.cache){let e=o.styleCache.get(i);e&&(c=!0,t+=e+"\n")}if(!c){const s=await e.xhr(a,r.timeout,!1);if(200==s?.code&&s?.data){const e=this.getImportUrl(s?.data);e.length>0?t+=await this.handleStyle(s?.data,a,e)+"\n":t+=s.data+"\n",r.cache&&o.styleCache.set(i,t)}}}))}return t},loadStyle(t,o){if(!document.querySelector(`[v-${this.scopedId}="${o}"]`)){let s;r.isBlob?(s=document.createElement("link"),s.setAttribute("href",e.blob(t,"css")),s.setAttribute("type","text/css"),s.setAttribute("rel","stylesheet")):(s=document.createElement("style"),s.textContent=t),s.setAttribute(`v-${this.scopedId}`,o),document.head.appendChild(s)}return this},getImportUrl:e=>[...e.matchAll(/@import\s*(url\()?\s*['"]([^'"]+)['"]\s*(\))?\s*([^;]*);/g)].map(e=>({fullMatch:e[0],path:e[2].trim(),conditions:e[4]?.trim()})),delImportFrom:e=>e.replace(/^\s*import\s+(?:(?:\*\s+as\s+)?[\w{},\s]+?\s+from\s+)?['"][^'"]+['"];?\s*$/gm,""),compress(e,t="js"){const o=r.compress;return o?"function"==typeof o?o(e,t)||e:this.removeComments(e,t):e},removeComments:(e,t="js")=>(e=e.replace(/(?<!\\)(?:^|[\n\r])([ \t]*)(?<!['"])(?<!['"]\s*)\/*(?!.*['"])(\/\/.*$)/gm,"$1").replace(/^\s+|\s+$/g,"").replace(/\s+/g," ").replace(/^\s*\n/gm,""),"js"===t?e.replace(/([{}();,:[\]])\s+/g,(e,t)=>"}"===t?"}\n":t).replace(/\s+([{}();,:[\]])/g,"$1"):e.replace(/\/\/.*?$|(?<!\\)(['"`]).*?\1|(\/\/.*)/gm,(e,t)=>t?e:"").replace(/^\s*[\r\n]/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s*([{}:;,>+()[\]])\s*/g,"$1").replace(/;}/g,"}")),addScopedIdToTemplate(e=!0){if(e)this.template=`<div ${this.scopedId}>${this.template}</div>`;else{const e=document.createElement("div");e.innerHTML=this.template;e.querySelectorAll("*").forEach(e=>{e.hasAttribute(this.scopedId)||e.setAttribute(this.scopedId,"")}),this.template=e.innerHTML}return this.template},addScopedIdToCss(e,t=!0){return t?e.replace(/([^{}]*){/g,(e,t)=>t.split(",").map(e=>`\r\n[${this.scopedId}] ${e.trim()}`).join(",")+"{"):e.replace(/([^{]+){/g,(e,t)=>t.trim().startsWith("@")?e:`${t}[${this.scopedId}] {`)},addExportCode(e,t){const o=/export\s+default\s*{/;if(o.test(e))return e.replace(o,e=>`${e}\n    ${t.trim()}`);const s=/(\s*)(return\s*{)/g,r=[/export\s+default\s+async\s+function\s*\([^)]*\)\s*{/,/export\s+default\s+function\s*\([^)]*\)\s*{/,/export\s+default\s*\([^)]*\)?\s*=>\s*{/];for(const o of r)if(o.test(e)){s.lastIndex=e.search(o)+1;const r=s.exec(e);if(r){const o=r[1];return e.replace(r[0],`${r[0]}\n${o}    ${t.trim()}`)}}return e}}},r=function(t={}){const r=function(e,t,o){const s={},r=t,n={check:(e,t)=>"function"==typeof o?o(e,t,typeof t,r[e]):t,set(e,t){return s[e]=this.check(e,t),s[e]},get:e=>void 0===e?s:s[e],conf(e,t){return"object"==typeof e?(Object.keys(e).forEach(e=>{this.set(e,t[e])}),e):void 0===e?s:void 0===t?this.get(e):this.set(e,t)}};return Object.keys(r).forEach(t=>s[t]=n.set(t,e[t])),n}(t,{view:"/view/",path:"index",format:"vue",timeout:5e3,isBlob:!0,cache:!0,compress:!0,req:e=>e,safe:window.aloneSafe||null,importType:null,importName:"_import_",alone:"alone",app:"app",home:"index",match:!0,error:"/",create:null,group:null,delay:200,i18n:null,lang:{},router:null,routes:[],routeType:1,routeLoad:null,routeErr:null},function(e,t,o,s){switch(e){case"view":case"path":case"format":case"importName":case"alone":case"app":case"home":case"error":"string"===o&&(s=t);break;case"timeout":case"delay":case"routeType":"number"===o&&(s=t);break;case"isBlob":case"cache":case"match":"boolean"===o&&(s=t);break;case"req":case"routeErr":case"routeLoad":"function"===o&&(s=t);break;case"compress":("function"===o||"boolean"===o)&&(s=t);break;case"group":case"i18n":case"lang":case"router":case"safe":"object"===o&&Object.keys(t).length>0&&(s=t);break;case"create":("string"===o||"object"===o&&Object.keys(t).length>0)&&(s=t);break;case"routes":"object"===o&&Array.isArray(t)&&(s=t);break;case"importType":"object"===o?s=Array.isArray(t)?t:Object.values(t):"string"===o&&(s=t.split(","))}return s});return{utils:e,asyncRouteConfig(t,o){const{shallowRef:s,defineAsyncComponent:r,onMounted:n}="undefined"!=typeof Vue?Vue:null,a=this.conf("routeLoad"),i=loaderVueThis.conf("routeErr");return r({loader:async()=>{try{return o()}catch(e){throw e}},loadingComponent:{template:"<div v-html='loadTemp'></div>",setup(){const o=s(null);return n(()=>{o.value="function"==typeof a?a(t):e.loadHtml()}),{loadTemp:o}}},errorComponent:{template:"<div v-html='errTemp'></div>",props:["error"],setup(e){const o=s(null);return n(()=>{o.value="function"==typeof i?i(t,e.error):`<center><h1>${e.error.message}</h1></center>`}),{errTemp:o}}},delay:this.conf("delay"),timeout:this.conf("timeout")})},conf:(e,t)=>r.conf(e,t),create(t={}){const{createApp:o}="undefined"!=typeof Vue?Vue:null,s=o("object"==typeof t?t:{template:"<aloneTemp/>",components:{aloneTemp:this.asyncRouteConfig("/",async()=>await this.getRouteFile(t))}});return s.load=function(t,o,r){return e.app(t),s.mount(`#${t}`,o,r)},s},async getRouteFile(t,s=!0){try{let n,a=e.rtrim(r.conf("view"))+"/"+e.trim(t||r.conf("path"));a=e.getPathFormat(a)?a:a+"."+r.conf("format");const i=e.hash(a);let c=!1;if(r.conf("cache")){let e=o.vueCache.get(i);e&&(c=!0,n=e)}if(!c){const t=await e.xhr(e.getParams(a),r.conf("timeout"),s);n=await this.vueCode(t.data,t.type,a),r.conf("cache")&&o.vueCache.set(i,n)}return function(t){const o=r.conf("alone");if(!o)return t;const s=t[o]||null;if(!s)return t;if("string"==typeof s)return e.setTitle(s),t;e.setTitle(s?.title),e.setMetaTag("keywords",s?.description),e.setMetaTag("description",s?.description),s?.favicon&&e.setFavicon(s?.favicon);const n=s?.link;n&&("string"==typeof n?[n]:"object"!=typeof n||Array.isArray(n)?n:Object.values(n)).forEach(t=>e.setLink(t));const a=s?.script;a&&("string"==typeof a?[a]:"object"!=typeof a||Array.isArray(a)?a:Object.values(a)).forEach(t=>e.setScript(t));return s?.head&&Object.keys(s?.head).forEach(e=>{const t=s?.head[e]||{attr:{}};if(t.tag&&!document.querySelector(`[data-head="${e}"]`)){let o=document.createElement(t.tag);o.setAttribute("data-head",e),Object.keys(t?.attr||{}).forEach(e=>{o.setAttribute(e,t?.attr[e])}),t.content&&(o.textContent=t.content),document.head.appendChild(o)}}),t}(n.default||n)}catch(s){throw s}},vueCode:async(e,t,o="")=>await s({body:e,bodyType:t,fullPath:o,importType:r.conf("importType"),isBlob:r.conf("isBlob"),compress:r.conf("compress"),timeout:r.conf("timeout"),req:r.conf("req"),safe:r.conf("safe"),importName:r.conf("importName"),cache:r.conf("cache")}).vueCode()}};class n{constructor(e={}){window.loaderVueThis=this,this.plugin={lay:"undefined"==typeof layui?null:layui,vue:"undefined"==typeof Vue?null:Vue,i18n:"undefined"==typeof VueI18n?null:VueI18n,router:"undefined"==typeof VueRouter?null:VueRouter},this.loader=r("object"!=typeof e?{view:e}:e);const t=this.conf("create"),{ref:o}=this.plugin.vue;this.app=this.loader.create(t||{template:'<asyncView v-if="showLoader" @load-complete="showLoader = false"/>',setup:()=>({showLoader:o(!0)}),components:{asyncView:this.loader.asyncRouteConfig("/",async()=>({template:"<router-view></router-view>",emits:["load-complete"]}))}})}conf(e,t){return this.loader.conf(e,t)}load(){this.conf("lang")&&(this.i18nConfig=Object.assign({locale:"zh",fallbackLocale:"en"},this.conf("lang")),this.i18n=this.plugin.i18n.createI18n(this.i18nConfig),this.app.use(this.i18n)),this.conf("router")&&(this.routerConfig=Object.assign({history:this.plugin.router.createWebHashHistory(),routes:this.conf("routes")},this.conf("router"))),this.conf("home")&&(this.routerConfig=this.routerConfig?this.routerConfig:{history:this.plugin.router.createWebHashHistory(),routes:this.conf("routes")},this.routerConfig.routes.push({path:"/",name:"alone-index-page",...this.component({url:this.conf("home"),view:"/",parent:[],layout:!1,level:1,end:!0})}));const e=this.conf("group");return e&&"object"==typeof e&&Object.keys(e).length>0&&(this.routerConfig=this.routerConfig?this.routerConfig:{history:this.plugin.router.createWebHashHistory(),routes:this.conf("routes")},this.groupConfig=this.groupRoute(e,this.component),this.groupConfig.length>0&&(this.routerConfig.routes=this.routerConfig.routes.concat(this.groupConfig))),this.conf("match")&&this.routerConfig.routes.push({path:"/:pathMatch(.*)*",name:"alone-path-match",...this.component({url:"/",view:"/:pathMatch(.*)*",parent:[],layout:!1,level:1,end:!0})}),this.routerConfig&&(this.router=this.plugin.router.createRouter(this.routerConfig),this.router.beforeEach((e,t,o)=>{if(!e.matched.length)return this.conf("error")&&o(this.conf("error")),!1;o()}),this.app.use(this.router)),this.app.load(this.conf("app")),this}vue(e=null){const{proxy:t,appContext:o}=this.plugin.vue.getCurrentInstance(),s=o?.config?.globalProperties||{};return null===e?t:!0===e?Object.assign(t,s):s}getLang(e,t){const o=this.i18n.global.t(e);return void 0===t||o!==e?o:t}setLang(e,t="",o=!0){const s=t||this.i18n.global.locale;return o?this.i18n.global.mergeLocaleMessage(s,e):this.i18n.global.setLocaleMessage(s,e)}jumpRoute(e,{name:t="",params:o={},query:s={},hash:r=""}={}){this.router.push({path:e,name:t,params:o,query:s,hash:r})}getRoute(e=""){return e?this.router.currentRoute.value[e]:this.router.currentRoute.value}getRoutes(){return this.router.getRoutes()}component({url:t,view:o,parent:s,layout:r,level:n,end:a}={}){return{meta:{url:t,view:o,parent:s,layout:r,level:n,end:a},component:{template:'<component :is="aloneComponent"/>',setup(){const{shallowRef:o,watch:n,watchEffect:a}=loaderVueThis.plugin.vue,i=o(null),c=async o=>{const n=(t=>{t=t||{params:{pathMatch:t.params.path}};const o=t?.params?.pathMatch||t?.params?.path;return e.trim((Array.isArray(o)?o.join("/"):o)||"")})(o);let a=r?t:t+"/"+n;a=e.trim(a),s&&0!==s.length&&s.includes(a)||(i.value=loaderVueThis.loader.asyncRouteConfig(a,async()=>await loaderVueThis.loader.getRouteFile(a)))},l=()=>n(()=>loaderVueThis.router.currentRoute.value,c,{immediate:!0});switch(loaderVueThis.conf("routeType")||1){case 1:default:l();break;case 2:a(()=>c(loaderVueThis.router.currentRoute.value));break;case 3:loaderVueThis.router.isReady().then(async()=>await c(loaderVueThis.router.currentRoute.value)),loaderVueThis.plugin.router.onBeforeRouteUpdate(async e=>await c(e))}return{aloneComponent:i}}}}}groupRoute(e,t,o=""){if(!e)return[];const s=[];for(const[r,n]of Object.entries(e)){const e=r.replace(/\//g,"-"),a="string"==typeof n?n.split(","):[n],i=a[0];let c;c=i.startsWith("/")?i.substring(1):i.startsWith("./")?`${r}/${i.substring(2)}`:`${r}/${i}`;const l=o?`/${o}/${r}`:`/${r}`,u=o?`${o}-${e}`:e,h={path:l,name:u,children:[],...t({url:c,view:l,parent:[],layout:!0,level:1,end:!1}||{})};if(a.length>1){let e=h,o=[c],s=2;for(let n=1;n<a.length;n++){const i=a[n];let c,l=i;i.startsWith("/")?(c=i.substring(1),l=i.substring(1)):i.startsWith("./")?(c=`${r}/${i.substring(2)}`,l=i.substring(2)):(c=`${r}/${i}`,l=i);const h={path:l,name:`${u}-${a.slice(0,n).map(e=>e.replace(/^\.?\//,"")).join("-")}`,children:[],...t({url:c,view:l,parent:[...o],layout:!0,level:s,end:!1}||{})};e.children.push(h),e=h,o.push(c),s++}const n=`${u}-${a.slice(0,-1).map(e=>e.replace(/^\.?\//,"")).join("-")}`;e.children=[{path:":pathMatch(.*)*",name:n,...t({url:r,view:":pathMatch(.*)*",parent:[...o],layout:!1,level:s,end:!0}||{})}]}else{const e=`${u}-${i.replace(/^\.?\//,"")}`;h.children=[{path:":pathMatch(.*)*",name:e,...t({url:r,view:":pathMatch(.*)*",parent:[c],layout:!1,level:2,end:!0}||{})}]}s.push(h)}return s}}return function(e={}){return new n(e)}});
